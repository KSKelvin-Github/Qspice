ÿØÿÛ«symbol PWM-CurrentMode-DutyLimit
  «type: X»
  «description: Current Mode Controller»
  «library file: |.subckt PWM-CurrentMode-DutyLimit Isense Comp Sawtooth CLK PWM\nB1 Sawtooth 0 V=idt(fsw,0,V(sawtooth)>1)\nVlogic1V p1v 0 1\n¥1 p1v 0 CLK ¥ N01 Sawtooth ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ HMITT TTOL=ttol\n¥2 p1v 0 N02 ¥5 CLK R ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ SR-FLOP\n¥4 p1v 0 R ¥ Isense Comp ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ HMITT TTOL=ttol\nB2 N01 0 V=if(time>0,ClkDuty,-1)\n¥3 p1v 0 N03 ¥6 p1v CLK 0 0 ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ T-FLOP\n¥5 p1v 0 PWM ¥ N03 N02 ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ AND\n.ends PWM-CurrentMode-DutyLimit»
  «shorted pins: false»
  «line (-300,600) (-300,100) 0 0 0x1000000 -1 -1»
  «line (-300,100) (0,350) 0 0 0x1000000 -1 -1»
  «line (0,350) (-300,600) 0 0 0x1000000 -1 -1»
  «line (-400,500) (-800,500) 0 0 0x1000000 -1 -1»
  «line (-300,200) (-800,200) 0 0 0x1000000 -1 -1»
  «line (-280,230) (-200,230) 0 0 0x1000000 -1 -1»
  «line (-240,270) (-240,190) 0 0 0x1000000 -1 -1»
  «line (-280,480) (-200,480) 0 0 0x1000000 -1 -1»
  «line (100,350) (0,350) 0 0 0x1000000 -1 -1»
  «line (1500,-100) (-150,-100) 0 0 0x1000000 -1 -1»
  «line (-350,-500) (-350,-300) 0 0 0x1000000 -1 -1»
  «line (-350,-500) (1490,-500) 0 0 0x1000000 -1 -1»
  «line (1200,-470) (1300,-370) 0 0 0x1000000 -1 -1»
  «line (1300,-370) (1300,-470) 0 0 0x1000000 -1 -1»
  «line (1300,-470) (1400,-370) 0 0 0x1000000 -1 -1»
  «line (1400,-370) (1400,-470) 0 0 0x1000000 -1 -1»
  «line (1400,-470) (1450,-420) 0 0 0x1000000 -1 -1»
  «line (1200,-370) (1200,-470) 0 0 0x1000000 -1 -1»
  «line (0,-100) (0,150) 0 0 0x1000000 -1 -1»
  «line (100,150) (0,150) 0 0 0x1000000 -1 -1»
  «line (-130,420) (-190,420) 0 0 0x1000000 -1 -1»
  «line (-160,270) (-220,270) 0 0 0x1000000 -1 -1»
  «line (-190,420) (-190,270) 0 0 0x1000000 -1 -1»
  «line (-160,270) (-160,420) 0 0 0x1000000 -1 -1»
  «line (1200,30) (1200,-70) 0 0 0x1000000 -1 -1»
  «line (1150,-70) (1450,-70) 0 0 0x1000000 -1 -1»
  «line (1300,-70) (1300,30) 0 0 0x1000000 -1 -1»
  «line (1400,-70) (1400,30) 0 0 0x1000000 -1 -1»
  «line (1150,-420) (1200,-370) 0 0 0x1000000 -1 -1»
  «line (1200,430) (1200,330) 0 0 0x1000000 -1 -1»
  «line (1200,430) (1250,430) 0 0 0x1000000 -1 -1»
  «line (1250,430) (1250,330) 0 0 0x1000000 -1 -1»
  «line (1250,330) (1400,330) 0 0 0x1000000 -1 -1»
  «line (1400,330) (1400,430) 0 0 0x1000000 -1 -1»
  «line (1400,430) (1450,430) 0 0 0x1000000 -1 -1»
  «line (1450,430) (1450,330) 0 0 0x1000000 -1 -1»
  «line (1200,330) (1150,330) 0 0 0x1000000 -1 -1»
  «line (500,-100) (500,100) 0 0 0x1000000 -1 -1»
  «line (500,100) (550,100) 0 0 0x1000000 -1 -1»
  «line (450,400) (850,400) 0 0 0x1000000 -1 -1»
  «line (800,200) (850,200) 0 0 0x1000000 -1 -1»
  «line (550,150) (600,100) 0 0 0x1000000 -1 -1»
  «line (600,100) (550,50) 0 0 0x1000000 -1 -1»
  «line (850,450) (850,150) 0 0 0x1000000 -1 -1»
  «line (1000,450) (850,450) 0 0 0x1000000 -1 -1»
  «line (1000,150) (850,150) 0 0 0x1000000 -1 -1»
  «line (1500,300) (1110,300) 0 0 0x1000000 -1 -1»
  «rect (-800,700) (1500,-700) 0 0 0 0x1000000 0xf5d29b -1 0 -1»
  «rect (100,30) (450,480) 0 0 0 0x1000000 0x1000000 -1 0 -1»
  «rect (-550,0) (-150,-300) 0 0 0 0x1000000 0x1000000 -1 0 -1»
  «rect (550,30) (800,280) 0 0 0 0x1000000 0x1000000 -1 0 -1»
  «ellipse (-400,550) (-300,450) 0 0 0 0x1000000 0x1000000 -1 -1»
  «ellipse (-50,-50) (50,-150) 0 0 0 0x1000000 0xff0012 -1 -1»
  «ellipse (450,-50) (550,-150) 0 0 0 0x1000000 0xff0012 -1 -1»
  «arc3p (1000,150) (1000,450) (950,300) 0 0 0x1000000 -1 -1»
  «text (-800,950) 1 7 0 0x1000000 -1 -1 "X1"»
  «text (-800,800) 1 7 0 0x1000000 -1 -1 "PWM-CURRENTMODE-DUTYLIMIT"»
  «text (200,370) 1 0 1 0x1000000 -1 -1 "R"»
  «text (200,150) 1 0 1 0x1000000 -1 -1 "S"»
  «text (-350,-150) 1 15 1 0x1000000 -1 -1 "OSC"»
  «text (1500,-800) 1 11 0 0x0 -1 -1 "fsw=<50k>"»
  «text (1500,-950) 1 11 0 0x0 -1 -1 "ttol=<1n>"»
  «text (1500,-1100) 1 11 2 0x1000000 -1 -1 "ClkDuty=<0.02>"»
  «text (650,120) 1 0 1 0x1000000 -1 -1 "T"»
  «text (1200,570) 0.857 0 1 0x1000000 -1 -1 "50% max"»
  «pin (-800,200) (20,0) 1 6 0 0x0 -1 "Isense"»
  «pin (-800,500) (20,0) 1 6 0 0x0 -1 "Comp"»
  «pin (1500,-500) (-20,0) 1 9 0 0x0 -1 "Sawtooth"»
  «pin (1500,-100) (-20,0) 1 9 0 0x0 -1 "CLK"»
  «pin (1500,300) (-20,0) 1 9 0 0x0 -1 "PWM"»
»
